<html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>A minimal Protein Feature View Page</title>

   
    <!-- bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
   

    <!-- jquery SVG includes -->
    <link rel="stylesheet" type="text/css" href="js/vendor/svg/jquery.svg.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css"/>
 
    <!-- font awesome icons -->
    <link rel="stylesheet" href="css/font-awesome.min.css">


    <!-- and finally our own code ... !-->
    <link href="css/pfv.css" rel="stylesheet">

    <script src="build/proteinfeatureview.min.js"></script>


</head>

<body>

<div class="container-fluid" >

    <div class="jumbotron">
        <h1>Insulin receptor - P06213 (INSR_HUMAN)</h1>
        <h3>Protein Feature View - View PDB entries that are mapped to UniProtKB</h3>
    </div>


    <div class="btn-toolbar " role="toolbar" style="padding-bottom: 3px;">


                    <div class="col-md-3 input-group pull-left">


                            <input type="text" class="input-medium form-control" placeholder="UniProt ID" name="up-field" id="up-field">
                            <div class="input-group-btn">
                                <button class="btn btn-group" style="height:34px;" type="submit"><i class="fa fa-search"></i></button>
                            </div>

                    </div>



             
                    <div class="btn-group">
                  
                      <button class="btn btn-default" href="#" role="button" id="fullScreen"><i class="fa fa-arrows-alt"></i> Full screen</button>

                        <button class="btn btn-default" style="height:34px" id="zoomOut" role="button"><i class="fa fa-search-minus"></i></button>

                                <span class="btn btn-default" style="height:34px">

                                  <div id="svgScrollBar" style="width:100px; float:left; top:4px; "></div>

                                </span>

                        <button class="btn btn-default" id="zoomIn" style="height:34px"><i class="fa fa-search-plus"></i></button>
                        
                        <button class="btn btn-default" id="export"><i class="fa fa-download"></i> Export</button>

                   </div>

                
    </div>


    


    <div class="panel panel-default" >
        <div class="panel-body" >
            <div class="row-fluid">
                <div class="span12">


                    <div id="pfv-parent"></div>
                    <div id="dialog" title="Leave Page">&nbsp;</div>


                </div>
            </div>
        </div>

    </div>
</div>




<script>
var viewer ;

require(['viewer','params'], function(PFV,params){

    viewer = PFV;

    var featureView = new Object();

    $( document ).ready(function() {

        var uniprotID="P06213";

        

        $(function() {

            // if has not been initialized, initialize...
            
            try {
            featureView = new viewer.PFV();
           
            console.log("init of Protein Feature View " + featureView.getVersion());

            featureView.setParentDiv('#pfv-parent');

            featureView.setDialogDiv('#dialog');
            
            featureView.setScrollBarDiv('#svgScrollBar');

            featureView.setRcsbServer("http://pepper.rcsb.org:8080");
            
            featureView.setShowSeqres(true);
            
            featureView.loadUniprot(uniprotID);

            $('#up-field').val(uniprotID);
            $('#up-field').change(function(){

                var val =   $('#up-field').val();
                console.log("loading new uniprot " + val );
                featureView.loadUniprot(val);

            });

            $("#zoomOut").click(function(){

                var val = featureView.getScrollBarValue();
                val -= 25;
                featureView.setScrollValue(val);

            });
            $("#zoomIn").click(function(){
                var val = featureView.getScrollBarValue();

                val += 25;

                featureView.setScrollValue(val);
            });
           

            $('#fullScreen').click(function(){
                featureView.requestFullscreen(); 
                return false;
            });

             $('#export').click(
            function() {
                var svg = featureView.getSVGWrapper();
                var xml = svg.toSVG();
                open("data:image/svg+xml," + encodeURIComponent(xml));
               
            });

         } catch (err){
            console.error(err);

         }

        });


    });

});

</script>
</body>
</html>

